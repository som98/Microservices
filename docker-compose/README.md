## Grafana Loki and Alloy

### Official website for Grafana ->
#### https://grafana.com/

### Official documentation link for implementing Grafana Loki using docker compose ->
#### https://grafana.com/docs/loki/latest/get-started/quick-start/

### The Docker Compose configuration runs the following components, each in its own container:
- **flog:** which generates log lines. flog is a log generator for common log formats. (Here we are using our Microservices to produce logs)
- **Grafana Alloy:** which scrapes the log lines from flog, and pushes them to Loki through the gateway.
- **Gateway (nginx):** which receives requests and redirects them to the appropriate container based on the requestâ€™s URL.
- **Loki read component:** which runs a Query Frontend and a Querier.
- **Loki write component:** which runs a Distributor and an Ingester.
- **Loki backend component:** which runs an Index Gateway, Compactor, Ruler, Bloom Planner (experimental), Bloom Builder (experimental), and Bloom Gateway (experimental).
- **Minio:** which Loki uses to store its index and chunks.
- **Grafana:** which provides visualization of the log lines captured within Loki.

-------------------------------------------------------------------------------------------------------------------------------


Link to check prometheus metrics -
http://localhost:9090/

Link to check Grafana tool -
http://localhost:3000/

Default credentials for http://localhost:3000/dashboards -
User: admin
Password: admin

------------------------------------------------------------------------------------------------------------------------------

Loki - Loki with Alloy, typically doesn't directly fetch logs from the application itself. Instead, it collects logs from Docker containers through interfaces provided by Docker, such as logging drivers or log collection agents deployed within the Docker environment. These agents or logging drivers intercept logs generated by the applications running in Docker containers and then forward them to Loki for storage, indexing, and analysis. So, Loki indirectly receives logs from applications running in Docker containers via these Docker-provided interfaces or mechanisms.
Through the datasource configuration in grafana we get them in better UI for each microservice.
Alloy uses service discovery to automatically find containers, pods, or nodes running on a cluster. This is usually done using integrations with the underlying orchestration platform, such as Kubernetes, Docker etc.


Prometheus- Prometheus fetches health details from a Spring Boot application through an endpoint exposed by the Spring Boot Actuator module like /actuator/prometheus . We use Micrometer to make the health related data to convert it in a from which is understood by the Prometheus.
Integrates with Grafana to fetch data from Prometheus to create better GUIs.


Tempo and OpenTelemetry - Telemetory attaches microservice name, TRACE_ID and SPAN_ID for each log. Then tempo can search the logs based on the TRACE_ID within multiple microservices and the we use Grafana to view the trace path in better way.
